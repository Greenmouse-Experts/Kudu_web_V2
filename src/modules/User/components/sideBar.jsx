import Imgix from "react-imgix";
import { Link } from "react-router-dom";
import useAppState from "../../../hooks/appState";
import { useModal } from "../../../hooks/modal";
import SwitchVendorModal from "./switchVendor";
import { useDispatch } from "react-redux";
import { setKuduUser } from "../../../reducers/userSlice";
import { VscBell } from "react-icons/vsc";
import Badge from "../../../components/Badge";

const ProfileSideBar = ({ close }) => {
    const { user } = useAppState();
    const { openModal } = useModal();

    const dispatch = useDispatch();

    const handleRedirect = () => {
        const updatedUser = { ...user, accountType: 'Vendor' };
        dispatch(setKuduUser(updatedUser))
        setTimeout(() => {
            window.location.reload()
        }, 200);
    }

    const isVendor = user.accountType !== 'Customer';

    const navItems = [
        {
            label: "My Stores", icon: <svg width="23" height="18" viewBox="0 0 23 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22.25 16.5H20.75V6C20.9489 6 21.1397 5.92098 21.2803 5.78033C21.421 5.63968 21.5 5.44891 21.5 5.25C21.5 5.05109 21.421 4.86032 21.2803 4.71967C21.1397 4.57902 20.9489 4.5 20.75 4.5H16.25V1.5C16.4489 1.5 16.6397 1.42098 16.7803 1.28033C16.921 1.13968 17 0.948912 17 0.75C17 0.551088 16.921 0.360322 16.7803 0.21967C16.6397 0.0790178 16.4489 0 16.25 0H2.75C2.55109 0 2.36032 0.0790178 2.21967 0.21967C2.07902 0.360322 2 0.551088 2 0.75C2 0.948912 2.07902 1.13968 2.21967 1.28033C2.36032 1.42098 2.55109 1.5 2.75 1.5V16.5H1.25C1.05109 16.5 0.860322 16.579 0.71967 16.7197C0.579018 16.8603 0.5 17.0511 0.5 17.25C0.5 17.4489 0.579018 17.6397 0.71967 17.7803C0.860322 17.921 1.05109 18 1.25 18H22.25C22.4489 18 22.6397 17.921 22.7803 17.7803C22.921 17.6397 23 17.4489 23 17.25C23 17.0511 22.921 16.8603 22.7803 16.7197C22.6397 16.579 22.4489 16.5 22.25 16.5ZM19.25 6V16.5H16.25V6H19.25ZM4.25 1.5H14.75V16.5H12.5V12C12.5 11.8011 12.421 11.6103 12.2803 11.4697C12.1397 11.329 11.9489 11.25 11.75 11.25H7.25C7.05109 11.25 6.86032 11.329 6.71967 11.4697C6.57902 11.6103 6.5 11.8011 6.5 12V16.5H4.25V1.5ZM11 16.5H8V12.75H11V16.5ZM5.75 4.5C5.75 4.30109 5.82902 4.11032 5.96967 3.96967C6.11032 3.82902 6.30109 3.75 6.5 3.75H8C8.19891 3.75 8.38968 3.82902 8.53033 3.96967C8.67098 4.11032 8.75 4.30109 8.75 4.5C8.75 4.69891 8.67098 4.88968 8.53033 5.03033C8.38968 5.17098 8.19891 5.25 8 5.25H6.5C6.30109 5.25 6.11032 5.17098 5.96967 5.03033C5.82902 4.88968 5.75 4.69891 5.75 4.5ZM10.25 4.5C10.25 4.30109 10.329 4.11032 10.4697 3.96967C10.6103 3.82902 10.8011 3.75 11 3.75H12.5C12.6989 3.75 12.8897 3.82902 13.0303 3.96967C13.171 4.11032 13.25 4.30109 13.25 4.5C13.25 4.69891 13.171 4.88968 13.0303 5.03033C12.8897 5.17098 12.6989 5.25 12.5 5.25H11C10.8011 5.25 10.6103 5.17098 10.4697 5.03033C10.329 4.88968 10.25 4.69891 10.25 4.5ZM5.75 8.25C5.75 8.05109 5.82902 7.86032 5.96967 7.71967C6.11032 7.57902 6.30109 7.5 6.5 7.5H8C8.19891 7.5 8.38968 7.57902 8.53033 7.71967C8.67098 7.86032 8.75 8.05109 8.75 8.25C8.75 8.44891 8.67098 8.63968 8.53033 8.78033C8.38968 8.92098 8.19891 9 8 9H6.5C6.30109 9 6.11032 8.92098 5.96967 8.78033C5.82902 8.63968 5.75 8.44891 5.75 8.25ZM10.25 8.25C10.25 8.05109 10.329 7.86032 10.4697 7.71967C10.6103 7.57902 10.8011 7.5 11 7.5H12.5C12.6989 7.5 12.8897 7.57902 13.0303 7.71967C13.171 7.86032 13.25 8.05109 13.25 8.25C13.25 8.44891 13.171 8.63968 13.0303 8.78033C12.8897 8.92098 12.6989 9 12.5 9H11C10.8011 9 10.6103 8.92098 10.4697 8.78033C10.329 8.63968 10.25 8.44891 10.25 8.25Z" fill="#FF6F22" />
            </svg>,
            route: 'stores',
            vendor: true
        },
        {
            label: "My Products", icon: <svg width="23" height="18" viewBox="0 0 23 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M22.25 16.5H20.75V6C20.9489 6 21.1397 5.92098 21.2803 5.78033C21.421 5.63968 21.5 5.44891 21.5 5.25C21.5 5.05109 21.421 4.86032 21.2803 4.71967C21.1397 4.57902 20.9489 4.5 20.75 4.5H16.25V1.5C16.4489 1.5 16.6397 1.42098 16.7803 1.28033C16.921 1.13968 17 0.948912 17 0.75C17 0.551088 16.921 0.360322 16.7803 0.21967C16.6397 0.0790178 16.4489 0 16.25 0H2.75C2.55109 0 2.36032 0.0790178 2.21967 0.21967C2.07902 0.360322 2 0.551088 2 0.75C2 0.948912 2.07902 1.13968 2.21967 1.28033C2.36032 1.42098 2.55109 1.5 2.75 1.5V16.5H1.25C1.05109 16.5 0.860322 16.579 0.71967 16.7197C0.579018 16.8603 0.5 17.0511 0.5 17.25C0.5 17.4489 0.579018 17.6397 0.71967 17.7803C0.860322 17.921 1.05109 18 1.25 18H22.25C22.4489 18 22.6397 17.921 22.7803 17.7803C22.921 17.6397 23 17.4489 23 17.25C23 17.0511 22.921 16.8603 22.7803 16.7197C22.6397 16.579 22.4489 16.5 22.25 16.5ZM19.25 6V16.5H16.25V6H19.25ZM4.25 1.5H14.75V16.5H12.5V12C12.5 11.8011 12.421 11.6103 12.2803 11.4697C12.1397 11.329 11.9489 11.25 11.75 11.25H7.25C7.05109 11.25 6.86032 11.329 6.71967 11.4697C6.57902 11.6103 6.5 11.8011 6.5 12V16.5H4.25V1.5ZM11 16.5H8V12.75H11V16.5ZM5.75 4.5C5.75 4.30109 5.82902 4.11032 5.96967 3.96967C6.11032 3.82902 6.30109 3.75 6.5 3.75H8C8.19891 3.75 8.38968 3.82902 8.53033 3.96967C8.67098 4.11032 8.75 4.30109 8.75 4.5C8.75 4.69891 8.67098 4.88968 8.53033 5.03033C8.38968 5.17098 8.19891 5.25 8 5.25H6.5C6.30109 5.25 6.11032 5.17098 5.96967 5.03033C5.82902 4.88968 5.75 4.69891 5.75 4.5ZM10.25 4.5C10.25 4.30109 10.329 4.11032 10.4697 3.96967C10.6103 3.82902 10.8011 3.75 11 3.75H12.5C12.6989 3.75 12.8897 3.82902 13.0303 3.96967C13.171 4.11032 13.25 4.30109 13.25 4.5C13.25 4.69891 13.171 4.88968 13.0303 5.03033C12.8897 5.17098 12.6989 5.25 12.5 5.25H11C10.8011 5.25 10.6103 5.17098 10.4697 5.03033C10.329 4.88968 10.25 4.69891 10.25 4.5ZM5.75 8.25C5.75 8.05109 5.82902 7.86032 5.96967 7.71967C6.11032 7.57902 6.30109 7.5 6.5 7.5H8C8.19891 7.5 8.38968 7.57902 8.53033 7.71967C8.67098 7.86032 8.75 8.05109 8.75 8.25C8.75 8.44891 8.67098 8.63968 8.53033 8.78033C8.38968 8.92098 8.19891 9 8 9H6.5C6.30109 9 6.11032 8.92098 5.96967 8.78033C5.82902 8.63968 5.75 8.44891 5.75 8.25ZM10.25 8.25C10.25 8.05109 10.329 7.86032 10.4697 7.71967C10.6103 7.57902 10.8011 7.5 11 7.5H12.5C12.6989 7.5 12.8897 7.57902 13.0303 7.71967C13.171 7.86032 13.25 8.05109 13.25 8.25C13.25 8.44891 13.171 8.63968 13.0303 8.78033C12.8897 8.92098 12.6989 9 12.5 9H11C10.8011 9 10.6103 8.92098 10.4697 8.78033C10.329 8.63968 10.25 8.44891 10.25 8.25Z" fill="#FF6F22" />
            </svg>,
            route: 'products',
            vendor: true
        },
        {
            label: `${!user.isVerified ? 'Complete KYC' : 'View KYC'}`, icon: <svg width="20" height="22" viewBox="0 0 20 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M23.1853 7.69637C23.1525 7.62231 22.3584 5.86075 20.5931 4.09543C18.2409 1.74325 15.27 0.500122 12 0.500122C8.72999 0.500122 5.75905 1.74325 3.40687 4.09543C1.64155 5.86075 0.843741 7.62512 0.814679 7.69637C0.772035 7.79229 0.75 7.89609 0.75 8.00106C0.75 8.10603 0.772035 8.20983 0.814679 8.30575C0.847491 8.37981 1.64155 10.1404 3.40687 11.9057C5.75905 14.257 8.72999 15.5001 12 15.5001C15.27 15.5001 18.2409 14.257 20.5931 11.9057C22.3584 10.1404 23.1525 8.37981 23.1853 8.30575C23.2279 8.20983 23.25 8.10603 23.25 8.00106C23.25 7.89609 23.2279 7.79229 23.1853 7.69637ZM12 14.0001C9.11437 14.0001 6.59343 12.9511 4.50655 10.8829C3.65028 10.0314 2.92179 9.06039 2.34374 8.00012C2.92164 6.93975 3.65014 5.96873 4.50655 5.11731C6.59343 3.04918 9.11437 2.00012 12 2.00012C14.8856 2.00012 17.4066 3.04918 19.4934 5.11731C20.3514 5.96852 21.0815 6.93955 21.6609 8.00012C20.985 9.262 18.0403 14.0001 12 14.0001ZM12 3.50012C11.11 3.50012 10.2399 3.76404 9.49993 4.25851C8.7599 4.75298 8.18313 5.45578 7.84253 6.27805C7.50194 7.10031 7.41282 8.00511 7.58646 8.87803C7.76009 9.75094 8.18867 10.5528 8.81801 11.1821C9.44735 11.8114 10.2492 12.24 11.1221 12.4137C11.995 12.5873 12.8998 12.4982 13.7221 12.1576C14.5443 11.817 15.2471 11.2402 15.7416 10.5002C16.2361 9.76017 16.5 8.89014 16.5 8.00012C16.4988 6.80703 16.0242 5.66316 15.1806 4.81951C14.337 3.97587 13.1931 3.50136 12 3.50012ZM12 11.0001C11.4066 11.0001 10.8266 10.8242 10.3333 10.4945C9.83993 10.1649 9.45542 9.69635 9.22835 9.14817C9.00129 8.59999 8.94188 7.99679 9.05764 7.41485C9.17339 6.83291 9.45911 6.29836 9.87867 5.8788C10.2982 5.45924 10.8328 5.17352 11.4147 5.05777C11.9967 4.94201 12.5999 5.00142 13.148 5.22848C13.6962 5.45555 14.1648 5.84006 14.4944 6.33341C14.824 6.82676 15 7.40678 15 8.00012C15 8.79577 14.6839 9.55883 14.1213 10.1214C13.5587 10.6841 12.7956 11.0001 12 11.0001Z" fill="#FF6F22" />
            </svg>,
            route: 'updated-kyc',
            vendor: true
        },
        {
            label: "Become a Vendor", icon: <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="#FF6F22"
                width="20"
                height="20"
            >
                <rect x="4" y="16" width="16" height="4" fill="#FF6F22" />
                <path
                    d="M3 10h18L16.5 4h-9L3 10z"
                    fill=""
                />
                <rect x="5" y="10" width="2" height="6" fill="#FF6F22" />
                <rect x="17" y="10" width="2" height="6" fill="#FF6F22" />
                <path
                    d="M3 10h2.4L6.8 8H4.2L3 10zm4.4 0H7.2L8.4 8h2.4L9.4 10zm3.8 0h1.6L14.8 8h-2.4L13.2 10zm3.8 0h1.6L18.8 8h-2.4L17 10zm4.8 0H21L19.8 8h-2.4L19.8 10z"
                    fill="white"
                />
            </svg>
            ,
            route: null,
            vendor: false
        },
        {
            label: "Orders", icon: <svg width="20" height="22" viewBox="0 0 20 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.97 5.20158L10.72 0.687517C10.4996 0.565719 10.2518 0.501831 10 0.501831C9.74816 0.501831 9.50043 0.565719 9.28 0.687517L1.03 5.20345C0.794395 5.33237 0.597722 5.52217 0.460517 5.75304C0.323313 5.98391 0.25061 6.24739 0.25 6.51595V15.4822C0.25061 15.7508 0.323313 16.0142 0.460517 16.2451C0.597722 16.476 0.794395 16.6658 1.03 16.7947L9.28 21.3106C9.50043 21.4324 9.74816 21.4963 10 21.4963C10.2518 21.4963 10.4996 21.4324 10.72 21.3106L18.97 16.7947C19.2056 16.6658 19.4023 16.476 19.5395 16.2451C19.6767 16.0142 19.7494 15.7508 19.75 15.4822V6.51689C19.7499 6.24785 19.6774 5.98379 19.5402 5.75238C19.403 5.52096 19.206 5.33072 18.97 5.20158ZM10 2.00002L17.5319 6.12502L14.7409 7.65314L7.20813 3.52814L10 2.00002ZM10 10.25L2.46812 6.12502L5.64625 4.38502L13.1781 8.51002L10 10.25ZM1.75 7.43752L9.25 11.5419V19.5847L1.75 15.4831V7.43752ZM18.25 15.4794L10.75 19.5847V11.5456L13.75 9.90408V13.25C13.75 13.4489 13.829 13.6397 13.9697 13.7803C14.1103 13.921 14.3011 14 14.5 14C14.6989 14 14.8897 13.921 15.0303 13.7803C15.171 13.6397 15.25 13.4489 15.25 13.25V9.08283L18.25 7.43752V15.4785V15.4794Z" fill="#FF6F22" />
            </svg>,
            route: 'orders',
            vendor: null
        },
        {
            label: "Interested Auctions", icon: <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#FF6F22" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"/></svg>,
            route: 'interestedAuctions',
            vendor: null
        },
        {
            label: "Advert", icon: <svg width="20" height="22" viewBox="0 0 20 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.97 5.20158L10.72 0.687517C10.4996 0.565719 10.2518 0.501831 10 0.501831C9.74816 0.501831 9.50043 0.565719 9.28 0.687517L1.03 5.20345C0.794395 5.33237 0.597722 5.52217 0.460517 5.75304C0.323313 5.98391 0.25061 6.24739 0.25 6.51595V15.4822C0.25061 15.7508 0.323313 16.0142 0.460517 16.2451C0.597722 16.476 0.794395 16.6658 1.03 16.7947L9.28 21.3106C9.50043 21.4324 9.74816 21.4963 10 21.4963C10.2518 21.4963 10.4996 21.4324 10.72 21.3106L18.97 16.7947C19.2056 16.6658 19.4023 16.476 19.5395 16.2451C19.6767 16.0142 19.7494 15.7508 19.75 15.4822V6.51689C19.7499 6.24785 19.6774 5.98379 19.5402 5.75238C19.403 5.52096 19.206 5.33072 18.97 5.20158ZM10 2.00002L17.5319 6.12502L14.7409 7.65314L7.20813 3.52814L10 2.00002ZM10 10.25L2.46812 6.12502L5.64625 4.38502L13.1781 8.51002L10 10.25ZM1.75 7.43752L9.25 11.5419V19.5847L1.75 15.4831V7.43752ZM18.25 15.4794L10.75 19.5847V11.5456L13.75 9.90408V13.25C13.75 13.4489 13.829 13.6397 13.9697 13.7803C14.1103 13.921 14.3011 14 14.5 14C14.6989 14 14.8897 13.921 15.0303 13.7803C15.171 13.6397 15.25 13.4489 15.25 13.25V9.08283L18.25 7.43752V15.4785V15.4794Z" fill="#FF6F22" />
            </svg>,
            route: 'adverts',
            vendor: true
        },
        {
            label: "Messages", icon: <svg width="20" height="19" viewBox="0 0 20 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.25 0.500061H1.75003C1.3522 0.500061 0.97067 0.658096 0.689366 0.939401C0.408061 1.22071 0.250026 1.60224 0.250026 2.00006V17.0001C0.248331 17.286 0.329157 17.5663 0.482808 17.8074C0.636459 18.0485 0.85641 18.2402 1.11628 18.3594C1.31486 18.4516 1.53109 18.4996 1.75003 18.5001C2.10215 18.4992 2.4426 18.3737 2.71096 18.1457L2.7194 18.1391L5.78128 15.5001H18.25C18.6479 15.5001 19.0294 15.342 19.3107 15.0607C19.592 14.7794 19.75 14.3979 19.75 14.0001V2.00006C19.75 1.60224 19.592 1.22071 19.3107 0.939401C19.0294 0.658096 18.6479 0.500061 18.25 0.500061ZM18.25 14.0001H5.50003C5.31994 14.0002 5.1459 14.065 5.00971 14.1829L1.75003 17.0001V2.00006H18.25V14.0001ZM6.25003 6.50006C6.25003 6.30115 6.32904 6.11038 6.4697 5.96973C6.61035 5.82908 6.80111 5.75006 7.00003 5.75006H13C13.1989 5.75006 13.3897 5.82908 13.5304 5.96973C13.671 6.11038 13.75 6.30115 13.75 6.50006C13.75 6.69897 13.671 6.88974 13.5304 7.03039C13.3897 7.17104 13.1989 7.25006 13 7.25006H7.00003C6.80111 7.25006 6.61035 7.17104 6.4697 7.03039C6.32904 6.88974 6.25003 6.69897 6.25003 6.50006ZM6.25003 9.50006C6.25003 9.30115 6.32904 9.11038 6.4697 8.96973C6.61035 8.82908 6.80111 8.75006 7.00003 8.75006H13C13.1989 8.75006 13.3897 8.82908 13.5304 8.96973C13.671 9.11038 13.75 9.30115 13.75 9.50006C13.75 9.69897 13.671 9.88974 13.5304 10.0304C13.3897 10.171 13.1989 10.2501 13 10.2501H7.00003C6.80111 10.2501 6.61035 10.171 6.4697 10.0304C6.32904 9.88974 6.25003 9.69897 6.25003 9.50006Z" fill="#FF6F22" />
            </svg>,
            route: '/messages',
            vendor: null
        },
        {
            label: "Notification", icon: <VscBell color="#FF6F22" size={23} />,
            route: 'notification',
            vendor: null
        },
        {
            label: "Bookmarked Items", icon: <svg width="14" height="19" viewBox="0 0 14 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.25 0.00012207H1.75C1.35218 0.00012207 0.970644 0.158157 0.68934 0.439462C0.408035 0.720766 0.25 1.1023 0.25 1.50012V18.0001C0.250067 18.134 0.285951 18.2654 0.353929 18.3807C0.421907 18.496 0.519503 18.591 0.636587 18.6558C0.753672 18.7207 0.885979 18.753 1.01978 18.7495C1.15358 18.746 1.284 18.7067 1.3975 18.6357L7 15.1342L12.6034 18.6357C12.7169 18.7064 12.8472 18.7455 12.9809 18.7489C13.1146 18.7523 13.2467 18.7199 13.3636 18.6551C13.4806 18.5903 13.5781 18.4954 13.646 18.3802C13.7139 18.2651 13.7498 18.1338 13.75 18.0001V1.50012C13.75 1.1023 13.592 0.720766 13.3107 0.439462C13.0294 0.158157 12.6478 0.00012207 12.25 0.00012207ZM12.25 16.6473L7.39656 13.6145C7.27736 13.54 7.13963 13.5005 6.99906 13.5005C6.8585 13.5005 6.72076 13.54 6.60156 13.6145L1.75 16.6473V1.50012H12.25V16.6473Z" fill="#FF6F22" />
            </svg>,
            route: 'bookmark',
            vendor: null
        },
        {
            label: "Wallet",
            icon: <svg xmlns="http://www.w3.org/2000/svg" width="22" height="19" viewBox="0 0 24 24" fill="none" stroke="rgba(255, 111, 34, 1)" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" class="lucide lucide-wallet"><path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"/><path d="M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"/></svg>,
            route: 'wallet',
            vendor: true
        },
        {
            label: "Subscription", icon: <svg width="22" height="14" viewBox="0 0 24 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M23.1853 7.69637C23.1525 7.62231 22.3584 5.86075 20.5931 4.09543C18.2409 1.74325 15.27 0.500122 12 0.500122C8.72999 0.500122 5.75905 1.74325 3.40687 4.09543C1.64155 5.86075 0.843741 7.62512 0.814679 7.69637C0.772035 7.79229 0.75 7.89609 0.75 8.00106C0.75 8.10603 0.772035 8.20983 0.814679 8.30575C0.847491 8.37981 1.64155 10.1404 3.40687 11.9057C5.75905 14.257 8.72999 15.5001 12 15.5001C15.27 15.5001 18.2409 14.257 20.5931 11.9057C22.3584 10.1404 23.1525 8.37981 23.1853 8.30575C23.2279 8.20983 23.25 8.10603 23.25 8.00106C23.25 7.89609 23.2279 7.79229 23.1853 7.69637ZM12 14.0001C9.11437 14.0001 6.59343 12.9511 4.50655 10.8829C3.65028 10.0314 2.92179 9.06039 2.34374 8.00012C2.92164 6.93975 3.65014 5.96873 4.50655 5.11731C6.59343 3.04918 9.11437 2.00012 12 2.00012C14.8856 2.00012 17.4066 3.04918 19.4934 5.11731C20.3514 5.96852 21.0815 6.93955 21.6609 8.00012C20.985 9.262 18.0403 14.0001 12 14.0001ZM12 3.50012C11.11 3.50012 10.2399 3.76404 9.49993 4.25851C8.7599 4.75298 8.18313 5.45578 7.84253 6.27805C7.50194 7.10031 7.41282 8.00511 7.58646 8.87803C7.76009 9.75094 8.18867 10.5528 8.81801 11.1821C9.44735 11.8114 10.2492 12.24 11.1221 12.4137C11.995 12.5873 12.8998 12.4982 13.7221 12.1576C14.5443 11.817 15.2471 11.2402 15.7416 10.5002C16.2361 9.76017 16.5 8.89014 16.5 8.00012C16.4988 6.80703 16.0242 5.66316 15.1806 4.81951C14.337 3.97587 13.1931 3.50136 12 3.50012ZM12 11.0001C11.4066 11.0001 10.8266 10.8242 10.3333 10.4945C9.83993 10.1649 9.45542 9.69635 9.22835 9.14817C9.00129 8.59999 8.94188 7.99679 9.05764 7.41485C9.17339 6.83291 9.45911 6.29836 9.87867 5.8788C10.2982 5.45924 10.8328 5.17352 11.4147 5.05777C11.9967 4.94201 12.5999 5.00142 13.148 5.22848C13.6962 5.45555 14.1648 5.84006 14.4944 6.33341C14.824 6.82676 15 7.40678 15 8.00012C15 8.79577 14.6839 9.55883 14.1213 10.1214C13.5587 10.6841 12.7956 11.0001 12 11.0001Z" fill="#FF6F22" />
            </svg>,
            route: 'subscription',
            vendor: true
        },
        {
            label: "Settings", icon: <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.9997 7.50023C11.1097 7.50023 10.2396 7.76415 9.49962 8.25861C8.7596 8.75308 8.18283 9.45588 7.84223 10.2782C7.50164 11.1004 7.41252 12.0052 7.58616 12.8781C7.75979 13.751 8.18837 14.5529 8.81771 15.1822C9.44705 15.8115 10.2489 16.2401 11.1218 16.4138C11.9947 16.5874 12.8995 16.4983 13.7218 16.1577C14.544 15.8171 15.2468 15.2403 15.7413 14.5003C16.2358 13.7603 16.4997 12.8902 16.4997 12.0002C16.4984 10.8071 16.0239 9.66326 15.1803 8.81962C14.3367 7.97597 13.1928 7.50147 11.9997 7.50023ZM11.9997 15.0002C11.4063 15.0002 10.8263 14.8243 10.333 14.4946C9.83963 14.165 9.45511 13.6965 9.22805 13.1483C9.00099 12.6001 8.94158 11.9969 9.05733 11.415C9.17309 10.833 9.45881 10.2985 9.87837 9.87891C10.2979 9.45935 10.8325 9.17363 11.4144 9.05787C11.9964 8.94211 12.5996 9.00152 13.1477 9.22859C13.6959 9.45565 14.1645 9.84017 14.4941 10.3335C14.8237 10.8269 14.9997 11.4069 14.9997 12.0002C14.9997 12.7959 14.6836 13.5589 14.121 14.1215C13.5584 14.6842 12.7953 15.0002 11.9997 15.0002ZM22.3066 10.0512C22.2857 9.94555 22.2423 9.84567 22.1794 9.75832C22.1164 9.67096 22.0354 9.59818 21.9419 9.54491L19.1453 7.95116L19.1341 4.79929C19.1337 4.69074 19.1098 4.58356 19.064 4.48515C19.0182 4.38673 18.9516 4.29944 18.8688 4.22929C17.8543 3.37119 16.6861 2.7136 15.4263 2.29148C15.327 2.25789 15.2219 2.24547 15.1176 2.25499C15.0133 2.26452 14.9121 2.29579 14.8206 2.34679L11.9997 3.92366L9.17594 2.34398C9.0844 2.29269 8.98311 2.26118 8.87863 2.2515C8.77414 2.24181 8.66879 2.25415 8.56938 2.28773C7.31045 2.71294 6.14359 3.37304 5.13063 4.23304C5.04791 4.30309 4.98136 4.39023 4.93556 4.48847C4.88975 4.58671 4.86579 4.69371 4.86532 4.8021L4.85125 7.95679L2.05469 9.55054C1.96113 9.6038 1.88013 9.67659 1.8172 9.76394C1.75428 9.8513 1.71089 9.95117 1.69 10.0568C1.43406 11.3429 1.43406 12.6669 1.69 13.953C1.71089 14.0587 1.75428 14.1585 1.8172 14.2459C1.88013 14.3332 1.96113 14.406 2.05469 14.4593L4.85125 16.053L4.8625 19.2049C4.86284 19.3135 4.88674 19.4206 4.93255 19.5191C4.97835 19.6175 5.04498 19.7048 5.12782 19.7749C6.14226 20.633 7.31046 21.2906 8.57031 21.7127C8.66953 21.7463 8.77468 21.7587 8.87899 21.7492C8.98329 21.7397 9.08445 21.7084 9.17594 21.6574L11.9997 20.0768L14.8234 21.6565C14.9352 21.7187 15.0611 21.751 15.1891 21.7502C15.271 21.7502 15.3523 21.7369 15.43 21.7109C16.6888 21.2862 17.8556 20.6267 18.8688 19.7674C18.9515 19.6974 19.018 19.6102 19.0638 19.512C19.1096 19.4137 19.1336 19.3067 19.1341 19.1984L19.1481 16.0437L21.9447 14.4499C22.0383 14.3967 22.1192 14.3239 22.1822 14.2365C22.2451 14.1492 22.2885 14.0493 22.3094 13.9437C22.5639 12.6586 22.5629 11.3359 22.3066 10.0512ZM20.9003 13.324L18.2219 14.8474C18.1045 14.9141 18.0074 15.0113 17.9406 15.1287C17.8863 15.2224 17.8291 15.3218 17.7709 15.4155C17.6965 15.5338 17.6569 15.6705 17.6566 15.8102L17.6425 18.8337C16.9226 19.399 16.1205 19.8511 15.2641 20.1743L12.5622 18.6687C12.45 18.6066 12.3238 18.5743 12.1956 18.5749H12.1778C12.0644 18.5749 11.95 18.5749 11.8366 18.5749C11.7024 18.5716 11.5697 18.6039 11.4522 18.6687L8.74844 20.178C7.89017 19.8573 7.0859 19.4075 6.36344 18.844L6.35313 15.8252C6.35266 15.6853 6.31305 15.5482 6.23875 15.4296C6.18063 15.3359 6.12344 15.2421 6.07 15.1427C6.00374 15.0236 5.90659 14.9245 5.78875 14.8559L3.1075 13.3287C2.96875 12.451 2.96875 11.557 3.1075 10.6793L5.78125 9.15304C5.89861 9.08631 5.99577 8.98914 6.0625 8.87179C6.11688 8.77804 6.17407 8.67866 6.23219 8.58491C6.30659 8.46669 6.34623 8.32991 6.34656 8.19023L6.36063 5.16679C7.08056 4.60143 7.88262 4.14934 8.73907 3.82616L11.4372 5.33179C11.5546 5.39688 11.6874 5.42926 11.8216 5.42554C11.935 5.42554 12.0494 5.42554 12.1628 5.42554C12.297 5.42889 12.4296 5.39654 12.5472 5.33179L15.2509 3.82241C16.1092 4.14311 16.9135 4.59298 17.6359 5.15648L17.6463 8.17523C17.6467 8.31519 17.6863 8.45223 17.7606 8.57085C17.8188 8.6646 17.8759 8.75835 17.9294 8.85773C17.9956 8.97689 18.0928 9.076 18.2106 9.1446L20.8919 10.6718C21.0325 11.5501 21.0341 12.4451 20.8966 13.324H20.9003Z" fill="#FF6F22" />
            </svg>,
            route: '/settings/profile',
            vendor: null
        },
    ];


    const filteredItems = navItems.filter(item =>
        (isVendor && item.vendor) ||
        (!isVendor && item.vendor === false) ||
        item.vendor === null
    );


    const handleVendorModal = () => {
        openModal({
            size: 'sm',
            content: <SwitchVendorModal redirect={handleRedirect}>
                <div className='flex'>
                    <p className='text-sm gap-2 leading-[1.7rem]'>
                        Ready to grow your business? By switching to a vendor account,
                        you'll unlock tools to showcase your products, manage sales, and connect with customers.
                    </p>
                </div>
            </SwitchVendorModal>
        })
    }


    const closeModal = () => {
        close()
    }


    return (
        <div className="w-full bg-white rounded-lg z-[-1] All">
            {/* Profile Section */}
            <div className="flex flex-col gap-3 items-center p-4">
                <Imgix
                    src={user.photo || `https://res.cloudinary.com/do2kojulq/image/upload/v1735426614/kudu_mart/victor-diallo_p03kd2.png`}
                    alt="Profile"
                    width={80}
                    height={80}
                    sizes="100vw"
                    className="rounded-full w-20 h-20 object-cover border-4 border-white shadow-md"
                />
                <Link to={'/profile'}><h2 className="mt-2 text-lg font-semibold">{user.firstName} {user.lastName}</h2></Link>
                {user.accountType !== 'Customer' && (
                    <p className="w-full justify-center flex items-center my-1">
                        <Badge bgColor={user.isVerified ?  'bg-green-500' : 'bg-red-500'} textColor={'text-white'} text={user.isVerified ? 'Verified' : 'Unverified'} />
                    </p>
                )
                }
                <Link to={'/profile'} className="mt-1"><p className="text-sm">See Profile</p></Link>
            </div>

            {/* Alerts Section */}
            {user.accountType !== 'Customer' && !user.isVerified ?
                <div className="mt-1 mb-6 bg-kuduOrange px-1 py-1 w-full rounded-lg">
                    <div className="flex items-center justify-between text-white px-3 py-2 rounded-md">
                        <div className="flex items-center">
                            <span className="text-sm font-[600]">
                                Become verified by completing your KYC
                            </span>
                        </div>
                    </div>
                </div>
                :
                <></>
            }



            {/* Navigation Section */}
            <div className="p-4 flex flex-col gap-6">
                {filteredItems.map((item, index) => (
                    item.route ?
                        <Link
                            key={index}
                            to={`${item.route}`}
                            onClick={() => closeModal()}
                            className="flex items-center py-3 px-3 border-b border-gray-200 last:border-0 hover:bg-gray-100 cursor-pointer"
                        >
                            <span className="text-xl mr-4">{item.icon}</span>
                            <span className="text-sm font-[500]">{item.label}</span>
                        </Link>
                        :
                        <span
                            onClick={() => handleVendorModal()}
                            className="flex items-center py-3 px-3 border-b border-gray-200 last:border-0 hover:bg-gray-100 cursor-pointer">
                            <span className="text-xl mr-4">{item.icon}</span>
                            <span className="text-sm font-[500]">{item.label}</span>
                        </span>
                ))}
            </div>
        </div>
    );
};

export default ProfileSideBar;
